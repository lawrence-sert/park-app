
<ion-header [translucent]="true" class="ion-no-border">

	<div *ngFor="let basket of basket$ | async; index as i">
		<ion-toolbar class="header-color">

			<ion-buttons slot="start" class="g-font-size-18--xs">
				<ion-back-button>
					<i class="ti-arrow-left g-font-size-18--xs"></i>
				</ion-back-button>
			</ion-buttons>

			<ion-title class="ion-text-center">
				{{basket.basket_name}}
			</ion-title>

			<span slot="end" routerLink="/dashboard" class="g-padding-r-10--xs">
				<img class="profile-user-img-main  img-circle "
				src="assets/img/header-logo.png"
				alt="Park&Pick Logo">
			</span>

		</ion-toolbar>

		<div class="header-basket">
			<div class="basket-icon g-text-center--xs">
				<i class="fas fa-shopping-basket g-font-size-80--xs g-color--white"></i>
			</div>
			<div class="basket-cost">
				<div class="row"> 
					<div class="col-xs-6 created-date g-padding-t-20--xs">
						<span class="g-color--white g-font-size-12--xs">
							<i class="ti-calendar"></i> {{basket.basket_date.toDate() | date:'dd MMM yyyy h:mm'}}
						</span>
					</div>

					<div class="col-xs-6">
						<span class="pull-right">
							<h2 class="g-font-size-18--xs g-color--white">
								{{basket.basket_cost}}
								<span class="light">RWF</span>
							</h2>
						</span>
					</div>
				</div>
			</div>
		</div>

		<ion-segment [(ngModel)]="type" (ionChange)="segmentChanged($event)" scrollable>
			<ion-segment-button value="basket-items" size="3" checked>
				Basket Items
			</ion-segment-button>

			<ion-segment-button value="basket-history" size="3">
				Basket History
			</ion-segment-button>

			<ion-segment-button value="recipes" size="3">
				Recipes
			</ion-segment-button>

		</ion-segment>
	</div>
</ion-header>

<ion-content>

	<div [ngSwitch]="type">

		<div *ngSwitchCase="'basket-items'">
			<div *ngIf="basketItems?.length > 0; else emptyBasket">	

				<ion-list>
					<ion-item-sliding *ngFor="let basketItem of basketItems">
						<ion-item lines="full" routerLink="/notifications">
							<ion-label>
								<h2 class="g-font-size-12--xs g-color--primary">{{basketItem.product_id}}</h2>
								<p class="g-font-size-12--xs"></p>
							</ion-label>
							<ion-note slot="end">
								{{basketItem.date.toDate() | date:'dd/MM/yyy h:mm'}}
							</ion-note>
						</ion-item>
						<ion-item-options side="end">
							<ion-item-option color="danger" (click)="deleteBasket(basketItem.basket_id)">
								<i class="ti-trash g-font-size-18--xs"></i>
							</ion-item-option>
						</ion-item-options>
					</ion-item-sliding>
				</ion-list>

			</div>

			<ng-template #emptyBasket>
				<ion-row class="emptyImage">
					<ion-col>
						<img class="img-responsive g-margin-b-30--xs" src="assets/svg/empty-basket.svg">
					</ion-col>
				</ion-row>
			</ng-template>
		</div>


		<!-- Basket history activity -->
		<div  *ngSwitchCase="'basket-history'">			
		</div>

		<!-- Basket history activity -->
		<div  *ngSwitchCase="'recipe'">			
		</div>

	</div>
	
</ion-content>

<!-- fab placed to the bottom and start and on the bottom edge of the content overlapping footer with a list to the right -->
<ion-fab vertical="bottom" horizontal="start" slot="fixed">
	<ion-fab-button>
		<i class="ti-list g-font-size-18--xs"></i>
	</ion-fab-button>
	<ion-fab-list side="end">
		<ion-fab-button >
			<i class="ti-trash g-font-size-18--xs"></i>
		</ion-fab-button>
		<ion-fab-button>
			<i class="ti-trash g-font-size-18--xs"></i>
		</ion-fab-button>
	</ion-fab-list>
</ion-fab>

<!-- fab placed to the bottom and start and on the bottom edge of the content overlapping footer with a list to the right -->
<ion-fab vertical="bottom" horizontal="end" slot="fixed">
	<ion-fab-button size="small" (click)="openCalModal()">
		<i class="ti-plus"></i>
	</ion-fab-button>
</ion-fab>

